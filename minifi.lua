local a=0.8;local b=0.4;local c=0.4;local d=-32;local e=-20;local f=20;local g={"pickaxe"}local h=573;local component=component;local computer=computer;local unicode=unicode;local i=component.proxy(component.list("robot")())i.setLightColor(0xFFFFFF)local j=component.proxy(component.list("geolyzer")())local k=component.proxy(component.list("modem")()or"")local l=component.proxy(component.list("redstone")()or"")local m=component.proxy(component.list("inventory_controller")()or"")if k then k.open(h)if k.isWireless()then k.setStrength(16)end;k.broadcast(h,"robotStarted")if k.isWireless()then k.setStrength(math.huge)end end;if l then l.setWakeThreshold(14)end;local n=-math.huge;local function o()if computer.uptime()-n>4 then n=computer.uptime()for p=1,10 do computer.pullSignal(0.1)end end end;local q;local r,s,t=0,0,0;local u=1;local function v(w)for p=1,math.abs(u-w)do i.turn(w>u)end;u=w end;local function x(y)while true do if i.detect(y)then i.swing(y)else if i.move(y)then break end end;o()end;if y==3 then if u==1 then r=r+1 elseif u==3 then r=r-1 elseif u==2 then t=t+1 elseif u==4 then t=t-1 end elseif y==0 then s=s-1 elseif y==1 then s=s+1 elseif y==2 then if u==1 then r=r-1 elseif u==3 then r=r+1 elseif u==2 then t=t-1 elseif u==4 then t=t+1 end end;if q then for p=#q.v,1,-1 do if q.x[p]==r and q.y[p]==s and q.z[p]==t then table.remove(q.x,p)table.remove(q.y,p)table.remove(q.z,p)table.remove(q.v,p)break end end end end;local function z(A,B,C)A=math.floor(A)B=math.floor(B)C=math.floor(C)for p=1,math.abs(B)do if B>0 then x(1)elseif B<0 then x(0)end end;if A>0 then v(1)elseif A<0 then v(3)end;for p=1,math.abs(A)do x(3)end;if C>0 then v(2)elseif C<0 then v(4)end;for p=1,math.abs(C)do x(3)end end;local function D(A,B,C)z(A-r,B-s,C-t)end;local E=3;local function F()i.setLightColor(0xFF0000)local q={x={},y={},z={},v={}}for G=-2,2 do for H=-2,2 do for I=-2,2 do local J,K,L=G*E+1,H*E+1,I*E+1;local M=assert(j.scan(J,L,K,E,E,E))local p=1;for B=0,E-1 do for C=0,E-1 do for A=0,E-1 do local N,O,P=math.floor(J+A+r),math.floor(K+B+s),math.floor(L+C+t)if O<=e and(r~=N or s~=O or t~=P)then table.insert(q.x,N)table.insert(q.y,O)table.insert(q.z,P)table.insert(q.v,M[p])end;p=p+1 end end end end end end;return q end;local function Q(A,B,C,R,S,T)return math.abs(A-R)+math.abs(B-S)+math.abs(C-T)end;local function U(V)i.setLightColor(0xFF6600)local A,B,C,W;for p=1,#q.v do if q.v[p]>2.5 then if not A or Q(q.x[p],q.y[p],q.z[p],r,s,s)<Q(A,B,C,r,s,s)then A=q.x[p]B=q.y[p]C=q.z[p]W=p end end end;if not A then o()if V then return nil,nil,nil end;q=F()return U(true)end;return A,B,C end;local function X()i.setLightColor(0x00FF00)local B=s;if B<=4 and B>=-4 then if B>=0 then B=4 else B=-4 end end;D(0,B,0)D(0,0,0)end;local function Y()return computer.energy()/computer.maxEnergy()end;local function Z()local _=0;for p=1,i.inventorySize()do local a0=i.count(p)/i.space(p)if a0==math.huge then a0=1 end;_=_+a0 end;return _/i.inventorySize()end;local function a1(a2)for p=1,#g do if g[p]:find("%:")then if g[p]==a2 then return true end else if unicode.sub(a2,unicode.len(a2)-(unicode.len(g[p])-1),unicode.len(a2))==g[p]then return true end end end end;local function a3(a4)if not a4.damage then return 1 end;return 1-a4.damage/a4.maxDamage end;local function a5(a6)local a7,a8=i.durability()if a7 and a7<c or not a7 and a8=="no tool equipped"then i.setLightColor(0x0000FF)if not m then return false else local a9;for p=1,i.inventorySize()do local a4=m.getStackInInternalSlot(p)if a4 and a4.name and a1(a4.name)then if a3(a4)>=c then a9=p;break end end end;if not a9 then if a6 then v(4)if not i.suck(3)then v(1)return false end;v(1)return a5()end;return false end;i.select(a9)m.equip()return true end end;return true end;local function aa(ab)i.setLightColor(0x00FFFF)v(1)for p=1,i.inventorySize()do local a4=m.getStackInInternalSlot(p)if i.count(p)>0 and(not a4 or not a4.name or not a1(a4.name)or a3(a4)<c)then i.select(p)i.drop(3,math.huge)end end;while Y()<0.9 do o()end;if not a5(true)then computer.shutdown()end;if not ab then if l.getInput(2)>0 then computer.shutdown()end end end;local function ac()i.setLightColor(0xFFFF00)if not a5()then return end;D(0,d,0)q=F()while true do if Y()<b or Z()>a then break end;if not a5()then break end;local A,B,C=U()o()if not A then i.setLightColor(0xFF00FF)local ad,ae;while true do ad=math.random(0,2)ae=math.random(0,2)if ad==1 then ad=-f elseif ad==2 then ad=f end;if ae==1 then ae=-f elseif ae==2 then ae=f end;if math.floor(ad)~=0 or math.floor(ae)~=0 then break end end;z(ad,0,ae)else i.setLightColor(0xFFFF00)D(A,B,C)end;o()end end;aa(true)while true do o()ac()o()X()o()aa()end